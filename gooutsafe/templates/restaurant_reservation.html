{% extends "base.html" %}

{% block page_title %} All reservations {% endblock %}

{% block content %}
    <br>
    <h3> {{ restaurant.name }} </h3> <br>
    <h5> All your reservations </h5><br>

    <table class="table">

        {% for r in reservations %}
        <tr>
            <td>
                Table: {{ r.table_id }} -- Persons: {{ r.people_number }} --
                Start time: {{ r.start_time }} -- End time: {{ r.end_time }}
            </td>
            <td>
            <a type="button" class="btn btn-light"
            href="{{ url_for('reservation.reservation_details', restaurant_id=restaurant.id,
                reservation_id=r.id ) }}">
                    See details
            </a>
            </td>
            <td>
                <!-- Button trigger modal -->
                <button type="button" class="btn btn-light" data-toggle="modal" 
                  data-target="#deleteReservation">
                  Delete
                </button>
                
                <!-- Modal -->
                <div class="modal fade" id="deleteReservation" tabindex="-1" 
                aria-labelledby="deleteReservation" aria-hidden="true">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">
                            Are you sure??
                        </h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                      <div class="modal-body">
                        Do you want to delete this reservation?
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" 
                            data-dismiss="modal"> Close </button>

                        <a type="button" class="btn btn-danger"
                        href="{{ url_for('reservation.delete_reservation', id=r.id,
                              restaurant_id=restaurant.id) }}">
                            Delete
                        </a>
                      </div>
                    </div>
                  </div>
                </div>
            </td>
        </tr>
        {% endfor %}
    </table>

{% endblock %}

{% block footer %}
{% endblock %}